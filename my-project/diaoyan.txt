微信和第三方APP跳转通信的技术调研
一、	主流APP的分析
1、	爱奇艺：
ios跳转地址：
http://www.iqiyi.com/app/play.html?aid=717518300&vid=413242931d39bce2211a15aeddb6fc77&tvid=717518300&cid=6&offset=0&down=0&video_type=1&subtype=149&ftype=27&redirect=http%3A%2F%2Fota.iqiyi.com%2Ff2.jsp%3Fpos%3Dplay_button_open%26msrc%3D%26vfm%3D%26qyid%3D0ab55f041fafd773cd893d9979781305%26qypid%3D-1_2031

源码：
‘http://www.iqiyi.com/app/play.html?aid=717518300&vid=413242931d39bce2211a15aeddb6fc77&tvid=717518300&cid=6&offset=0&down=0&video_type=1&subtype=149&ftype=27&redirect=’+encodeURIComponent(‘http://ota.iqiyi.com/f2.jsp?pos=play_button_open&msrc=&vfm=&qyid=0ab55f041fafd773cd893d9979781305&qypid=-1_2031’)

微信读取标识 http://www.iqiyi.com/app/(微信白名单)
在跳转处理时微信检测到http://www.iqiyi.com/app/ 先去尝试呼起 ，if 用户安装了爱奇艺，则直接呼起，else 在微信内部打开 http://www.iqiyi.com/app/ 下的资源
Android跳转地址：
http://a.app.qq.com/o/simple.jsp?pkgname=com.qiyi.video&android_schema=iqiyi%3A%2F%2Fmobile%2Fplayer%3Faid%3D768839100%26vid%3Db972b04cd17733c3582d77a81ab8a99d%26tvid%3D768839100%26cid%3D6%26offset%3D0%26down%3D0%26video_type%3D1%26subtype%3D149%26ftype%3D27

源码：
‘http://a.app.qq.com/o/simple.jsp?pkgname=com.qiyi.video&android_schema=’+ encodeURIComponent(‘iqiyi://mobile/player?aid=768839100&vid=b972b04cd17733c3582d77a81ab8a99d&tvid=768839100&cid=6&offset=0&down=0&video_type=1&subtype=149&ftype=27’)

原理：先跳转到应用宝然后应用宝根据android_schema 参数去判断是否安装 if 用户安装了 则显示安全打开 并且能从应用宝直接跳转到爱奇艺 else 显示安全下载，
安全下载if用户没有安装 则下载的是应用宝(绑定式下载)
Android 客户端配置 
http://wiki.open.qq.com/index.php?title=AppLink%E6%8E%A5%E5%85%A5&from=singlemessage&isappinstalled=0

2、	网易云音乐：

ios跳转地址：
http://m.music.163.com/m/applink/?scheme=orpheus%3A%2F%2Fsong%2F472361096%3Fthirdfrom%3Dwx


源码：
“http://m.music.163.com/m/applink/?scheme=”+encodeURIComponent(“orpheus://song/472361096?thirdfrom=wx”)

微信读取标识 http://m.music.163.com/m/applink
Android跳转地址：
http://intent.music.163.com:50123/something2?k=1503825920068&s=dde44b60946445906d20083be10367e5&r=orpheus%3A%2F%2Fsong%2F473027568
源码:
http://intent.music.163.com:50123/something2?k=1503825920068&s=dde44b60946445906d20083be10367e5&r=+ encodeURIComponent(orpheus://song/473027568)
本地测试无法呼起，底层jsjdk控制
3、	微博
Ios中的标识：http://weibo.com 
Android 在微信中无法呼起
4、	京东
Ios:
'openapp.jdmobile://virtual?params={"category":"jump","des":"productDetail","skuId":"885987","sourceType":"MWEIXIN_PRODUCTFLOAT_TYPE","sourceValue":"MWEIXIN_PRODUCTFLOAT_VALUE","M_sourceFrom":"sxweixintopC","msf_type":"click","m_param":{"m_source":"0","event_series":{},"jda":"122270672.15038235592181951886342.1503823559.1503823559.1503825361.2","usc":"androidapp","ucp":"t_335139774","umd":"appshare","utr":"Wxfriends","jdv":"122270672%7Candroidapp%7Ct_335139774%7Cappshare%7CWxfriends%7C1503825361609","ref":"....m.jd.com%2Fproduct%2F885987.html%3Futm_source%3Dandroidapp%26utm_medium%3Dappshare%26utm_campaign%3Dt_335139774%26utm_term%3DWxfriends","psn":"15038235592181951886342|2","psq":1,"unpl":"","pc_source":"","mba_muid":"15038235592181951886342","mba_sid":"15038235592401541560666000179","mt_xid":"","mt_subsite":""},"SE":{"mt_subsite":"","__jdv":"122270672%7Candroidapp%7Ct_335139774%7Cappshare%7CWxfriends%7C1503825361609","unpl":"","__jda":"122270672.15038235592181951886342.1503823559.1503823559.1503825361.2"}}'
Android:
'intent://m.jd.com/#Intent;scheme=openApp.jdMobile://virtual?params={"category":"jump","des":"productDetail","skuId":"885987","sourceType":"MWEIXIN_PRODUCTFLOAT_TYPE","sourceValue":"MWEIXIN_PRODUCTFLOAT_VALUE","M_sourceFrom":"sxtop","msf_type":"click","m_param":{"m_source":"0","event_series":{},"jda":"122270672.15038235592181951886342.1503823559.1503823559.1503825361.2","usc":"androidapp","ucp":"t_335139774","umd":"appshare","utr":"Wxfriends","jdv":"122270672%7Candroidapp%7Ct_335139774%7Cappshare%7CWxfriend...3Futm_source%3Dandroidapp%26utm_medium%3Dappshare%26utm_campaign%3Dt_335139774%26utm_term%3DWxfriends","psn":"15038235592181951886342|2","psq":3,"unpl":"","pc_source":"","mba_muid":"15038235592181951886342","mba_sid":"15038235592401541560666000179","mt_xid":"","mt_subsite":""},"SE":{"mt_subsite":"","__jdv":"122270672%7Candroidapp%7Ct_335139774%7Cappshare%7CWxfriends%7C1503825431702","unpl":"","__jda":"122270672.15038235592181951886342.1503823559.1503823559.1503825361.2"}};package=com.jingdong.app.mall;end'
本地测试无法呼起，底层jssdk去控住
京东的一次分享 
Ios 链接地址：
https://item.m.jd.com/product/659169.html?utm_source=iosapp&utm_medium=appshare&utm_campaign=t_335139774&utm_term=Wxfriends&from=singlemessage&isappinstalled=1
其中isappinstalled=1 表示 用户已安装App 
二次分享
https://item.m.jd.com/product/659169.html?utm_source=iosapp&utm_medium=appshare&utm_campaign=t_335139774&utm_term=Wxfriends&from=singlemessage&isappinstalled=0

其中isappinstalled=0 表示 用户未安装App  二次分享无法判断 有出入
微信提供的isappinstalled 不太靠谱
Android 一次分享和二次分享都没有提供可判断的是否安装的参数

解决方案：
IOS 在浏览器中去唤醒不需要检测是否安装 先尝试去打开如打不开说明用户没有安装APP 直接跳转到 APP store
Android 跳转到应用宝让应用宝去处理 http://m.2cto.com/kf/201608/532563.html
